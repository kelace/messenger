(function(e){function t(t){for(var n,c,i=t[0],o=t[1],u=t[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&f.push(s[c][0]),s[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var o=r[i];0!==s[o]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},s={app:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=o;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"06bc":function(e,t,r){"use strict";r("6cf6")},"3e4e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQfmBBkNADmDhfexAAACZklEQVRYw8VXvU4qQRSe2YLlAbQzRBNjpHAJL2LslBAtXBuhct/BmGi1voQL2LBvIdpoIhJNBFvNgmu3FPPdYpKrK/PrldyvgzPnO9+cOXvmDCGWAIpF4PISyDL8RZYBnQ6Y69ryWQPs4ABS+L4tn2OtgHqe3KiyWQgAq1SAmxtgNAKazbx1eVlOt7KS40GzCYxGYNfXYIbigGoVSJJ8aqMIrFQCggAYj+VHMB4DQcDXRlHeliRAtaoOziqV2eC/iSRRZoKnfd7o9RQ1sLBgW0T2WFxUCDg9nb+As7Ovv+h3MxBFhGxvq0n6fYJul9DHR+60tkbo1hYh5bLar9WidGdHuYRXsAzv70CtBlCBcEqBeh1IU6k7K5W0CeKfmiQ429jQ+jPPk4sIAkHAYhHwfSAMgTgGJhOxc61mespgu7tijsmExwhDwPfBXJfwi0WH+3tR2uVZpBTs4UFLy9ptkr/VZDg+Ng3+KeLkRM+bZQ4hhYKe7unJVoCZT6FgeBuap9/WxyFkOtUvW121F2DiM50SoNPRn1W/b1eEjmNUhGi1CJjrmn2G9bqxALa3p/8M9/eFI5y8EaWpyVDBr/SPDzGHoBHNEqhacZryJiNqxY7Ddy4LDmEr/tllhMGA0G6XkMGA/1EuE2xuErq+rt6e5jLiM9y80WgoBLy8zF/AcPg15rdG9PamLZJ/xuurPAP/eyjlxyAayy8uwJaWgKOjuY7ln5nwPKDXA56fgcPDvMA4lguI4/zaRgMYDoGrK+OHiVYczs/lAsLQls/+bUhub+W2u7tf2aUyA8x1wdrt2ed5FP3kef4HMIIckCKqZjsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDQtMjVUMTM6MDA6NTcrMDA6MDDIQ1ITAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTA0LTI1VDEzOjAwOjU3KzAwOjAwuR7qrwAAAABJRU5ErkJggg=="},"4f6a":function(e,t,r){"use strict";r("fd86")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),s=r("6c02"),a=(r("b0c0"),r("3e4e")),c=r.n(a),i=function(e){return Object(n["u"])("data-v-c1e6bd2e"),e=e(),Object(n["s"])(),e},o={class:"messanger-holder"},u={class:"container-fluid h-100"},l={class:"row justify-content-center h-100"},d={class:"col-md-4 col-xl-3 chat"},f={class:"card mb-sm-3 mb-md-0 contacts_card"},g={class:"card-header"},p={class:"input-group"},h=i((function(){return Object(n["g"])("div",{class:"input-group-prepend"},[Object(n["g"])("span",{class:"input-group-text search_btn"},[Object(n["g"])("i",{class:"fas fa-search"})])],-1)})),m={class:"card-body contacts_body"},b={key:0,class:"progress is-small is-primary",max:"100"},O={key:1},A={key:0,class:"users-list"},j={class:"contacts"},v={class:"d-flex bd-highlight"},y={class:"user_info"},k={key:1,class:"users-list"},w={class:"contacs"},C={class:"d-flex bd-highlight"},I={class:"user_info"},U=i((function(){return Object(n["g"])("div",{class:"card-footer"},null,-1)})),F={class:"col-md-8 col-xl-6 chat"},x={class:"card"};function B(e,t,r,s,a,i){var B=this,M=Object(n["y"])("Modal"),L=Object(n["y"])("router-link"),P=Object(n["y"])("router-view");return Object(n["r"])(),Object(n["f"])(n["a"],null,[Object(n["G"])(Object(n["h"])(M,{onClose:i.closeModalHandler},null,8,["onClose"]),[[n["D"],a.modalOpen]]),Object(n["g"])("div",o,[Object(n["g"])("div",u,[Object(n["g"])("div",l,[Object(n["g"])("div",d,[Object(n["g"])("div",f,[Object(n["g"])("div",g,[Object(n["g"])("div",{class:"settings-icon",onClick:t[1]||(t[1]=function(){return i.settingsClickHanlder&&i.settingsClickHanlder.apply(i,arguments)})},[Object(n["g"])("img",{src:c.a,alt:"",onClick:t[0]||(t[0]=function(){return i.openModalHandler&&i.openModalHandler.apply(i,arguments)})})]),Object(n["g"])("div",p,[Object(n["G"])(Object(n["g"])("input",{type:"text",placeholder:"Search...",name:"",class:"form-control search","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.searchInput=e})},null,512),[[n["C"],a.searchInput]]),h])]),Object(n["g"])("div",m,[i.loading?(Object(n["r"])(),Object(n["f"])("progress",b," 15% ")):(Object(n["r"])(),Object(n["f"])("div",O,["Search"==a.searchBlock?(Object(n["r"])(),Object(n["f"])("div",A,[Object(n["g"])("ul",j,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(i.searchingUsersList,(function(e){return Object(n["r"])(),Object(n["d"])(L,{key:e.name,to:"/chat/profile/"+e.id},{default:Object(n["F"])((function(){return[Object(n["g"])("li",{class:Object(n["n"])({active:B.$route.params.id==e.id})},[Object(n["g"])("div",v,[Object(n["g"])("div",y,[Object(n["g"])("span",null,Object(n["A"])(e.name),1),Object(n["g"])("p",null,Object(n["A"])(i.getMessagePreview(e)),1)])])],2)]})),_:2},1032,["to"])})),128))])])):(Object(n["r"])(),Object(n["f"])("div",k,[Object(n["g"])("ul",w,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(i.users,(function(e){return Object(n["r"])(),Object(n["d"])(L,{key:e.name,to:"/chat/profile/"+e.id},{default:Object(n["F"])((function(){return[Object(n["g"])("li",{class:Object(n["n"])({active:B.$route.params.id==e.id})},[Object(n["g"])("div",C,[Object(n["g"])("div",I,[Object(n["g"])("span",null,Object(n["A"])(e.name),1),Object(n["g"])("p",null,Object(n["A"])(i.getMessagePreview(e)),1)])])],2)]})),_:2},1032,["to"])})),128))])]))]))]),U])]),Object(n["g"])("div",F,[Object(n["g"])("div",x,[Object(n["h"])(P)])])])])])],64)}var M=r("d4ec"),L=r("bee2"),P=(r("d3b7"),r("bc3a")),S=r.n(P),T=function(){function e(){Object(M["a"])(this,e)}return Object(L["a"])(e,[{key:"isAuthenticated",value:function(){var e=localStorage.getItem("token");return void 0!=e&&null!=e&&0!=e.length}},{key:"logIn",value:function(e,t){var r=this;return new Promise((function(n,s){S()({method:"post",url:"/Account/Login",data:{Name:e,Password:t},headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data,s=t.token;null!=t&&(r.setToken(s),n(t))})).catch((function(e){s(e)}))}))}},{key:"signUp",value:function(e,t,r){var n=this;return new Promise((function(s,a){S()({method:"post",url:"/Account/Register",data:{Name:e,Password:t,PasswordConfirm:r},headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data;null!=t&&(n.setToken(t.token),s(t),Jt.push("/chat"))})).catch((function(e){a(e)}))}))}},{key:"logOut",value:function(){S()({method:"post",url:"/Account/LogOut",headers:{"Content-Type":"application/json",Authorization:this.prepareToken()}}).then((function(){localStorage.setItem("token",""),Jt.push("/auth")})).catch((function(){}))}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"prepareToken",value:function(){return"Bearer ".concat(localStorage.getItem("token"))}}]),e}(),H=new T,R=r("262e"),D=r("2caf"),E=(r("ac1f"),r("841c"),r("159b"),r("7db0"),r("99af"),r("5502")),N=(r("a434"),r("4de4"),r("caad"),r("2532"),{namespaced:!0,state:function(){return{users:[]}},mutations:{addMessageToUser:function(e,t){var r=e.users.find((function(e){if(e.id==t.fromId)return e}));r.messages.push(t)},add:function(e,t){e.users.push(t)},update:function(e,t){var r=e.users.forEach((function(e,r){if(e.id==t.id)return r}));void 0!=r&&(e.users[r]=t)},remove:function(e,t){for(var r=0;r<e.users.length;r++)if(e.users[r].id===t){e.users.splice(r,1);break}},addMessage:function(e,t){var r=e.users.find((function(e){if(e.id==t.id)return!0}));r.messages.push(t.message),r.messagePreview=t.message.text},replace:function(e,t){e.users=t},replaceAll:function(e,t){e.users=t}},getters:{get:function(e){return function(t){var r=e.users.find((function(e){if(e.id==t)return!0}));return r}},getIndex:function(e){return function(t){var r=e.users.find((function(e){if(e.id==t)return!0}));return r}},getAll:function(e){return e.users},getAllByLetter:function(e){return function(t){return e.users.filter((function(e){if(e.name.includes(t))return!0}))}}},actions:{recieveOffer:function(e,t){e.commit("add",t)},removeOffer:function(e,t){var r=this.getters.getUser(t);r.status="Nothing",r.relationInitiator="Stranger",e.commit("update",r)},declineOffer:function(e,t){var r=this.getters.getUser(t);r.status="Nothing",r.relationInitiator="Stranger",e.commit("update",r)},addMessageToUser:function(e,t){e.commit("addMessage",t)},acceptOffer:function(e,t){var r=this.getters["user/get"](t);r.status="Accepted",e.commit("update",r)},reactToAccepting:function(e,t){t.status="Accepted",e.commit("add",t)},remove:function(e,t){e.commit("remove",t)},add:function(e,t){e.commit("add",t)},update:function(e,t){e.commit("update",t)},replace:function(e,t){e.commit("replace",t)},initiateAllInterlocutorsData:function(e,t){e.commit("replaceAll",t)},recieveMessage:function(e,t){e.commit("addMessageToUser",t)}}}),G=N,J={namespaced:!0,state:function(){return{isSearching:!1,isLoading:!1,searchingUsersList:[]}},mutations:{add:function(e,t){e.searchingUsersList.push(t)},update:function(e,t){var r=e.searchingUsersList4.forEach((function(e){if(e.id==t.id)return e}));void 0!=r&&(r=t)},replace:function(e,t){e.searchingUsersList=t},changeLoadingStatus:function(e,t){e.isLoading=t}},getters:{get:function(e){return function(t){var r=e.searchingUsersList.find((function(e){if(e.id==t)return!0}));return r}},getAll:function(e){return e.users}},actions:{startSearching:function(e){e.commit("changeLoadingStatus",!0)},stopSearching:function(e){e.commit("changeLoadingStatus",!1)},add:function(e,t){e.commit("add",t)},update:function(e,t){e.commit("update",t)},searchUsers:function(e,t){e.commit("replace",t)}}},Q=J,Y={namespaced:!0,state:function(){return{dialogUser:{}}},mutations:{change:function(e,t){e.dialogUser=t}},getters:{getMessages:function(e){return e.dialogUser.messages},get:function(e){var t=e.dialogUser;if(void 0!=t.name)return t}},actions:{acceptOffer:function(e){var t=this.getters["dialog/get"];t.status="Accepted",e.commit("change",t)},changeDialogUser:function(e,t){e.commit("change",t)},declineOffer:function(e){var t=this.getters["dialog/get"];t.status="Nothing",t.isThisUserInitiatorOfRelation=!1,e.commit("change",t)},removeOffer:function(e){var t=this.getters["dialog/get"];t.status="Nothing",t.isThisUserInitiatorOfRelation=!1,e.commit("change",t)},sendOffer:function(e){var t=this.getters["dialog/get"];t.status="Sended",t.isThisUserInitiatorOfRelation=!1,e.commit("change",t)}}},V=Y,z=r("1da1"),_=(r("96cf"),function(){function e(){Object(M["a"])(this,e),this.axios=S.a}return Object(L["a"])(e,[{key:"send",value:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=H.prepareToken(),t.headers={Authorization:r},e.prev=2,e.next=5,this.axios(t);case 5:n=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](2),Jt.push("/auth"),e.abrupt("return",null);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),Z=new _,K={namespaced:!0,state:function(){return{currentUser:{name:"",id:"",photo:""}}},mutations:{change:function(e,t){e.currentUser=t}},getters:{get:function(e){var t=e.currentUser;return t}},actions:{queryAppData:function(e,t){var r=this;return Object(z["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Z.send({url:"/Account/StartPoint",method:"post",data:{dialogId:t}});case 2:s=n.sent,200==s.status&&(a={name:s.data.name,id:s.data.id,photo:s.data.photo},e.commit("change",a),r.dispatch("user/initiateAllInterlocutorsData",s.data.users));case 4:case"end":return n.stop()}}),n)})))()},initiateAppData:function(e,t){var r={name:t.name,id:t.id,photo:t.photo};e.commit("change",r),this.dispatch("user/initiateAllInterlocutorsData",t.users)},changePhoto:function(e,t){var r=this.getters["account/get"];r.photo=t,e.commit("change",r)}}},W=K,X=Object(E["a"])({modules:{user:G,search:Q,dialog:V,account:W}}),$=X,q=Object(L["a"])((function e(){Object(M["a"])(this,e),this.store=$})),ee=function(e){Object(R["a"])(r,e);var t=Object(D["a"])(r);function r(){return Object(M["a"])(this,r),t.call(this)}return Object(L["a"])(r,[{key:"get",value:function(e){var t=this.store.getters["user/get"](e),r=this.store.getters["dialog/get"],n=this.store.getters["search/get"](e);if(void 0!=t)return t;if(void 0!=r&&r.id==e)return r;if(void 0!=n)return n;throw"Пользователь не существует"}},{key:"add",value:function(e){this.store.dispatch("user/add",e)}},{key:"getDialogUser",value:function(){return this.store.getters["dialog/get"]}},{key:"changeDialogUser",value:function(e){var t=this.get(e);return this.store.dispatch("dialog/changeDialogUser",t),t}},{key:"getAll",value:function(){return this.store.getters["user/getAll"]}},{key:"getAllByLetter",value:function(e){return this.store.getters["user/getAllByLetter"](e)}},{key:"changeAllUsers",value:function(e){this.store.dispatch("user/replace",e)}},{key:"initiateAllInterlocutorsData",value:function(e){this.store.dispatch("user/replace",e)}}]),r}(q),te=new ee,re=function(e){Object(R["a"])(r,e);var t=Object(D["a"])(r);function r(){return Object(M["a"])(this,r),t.call(this)}return Object(L["a"])(r,[{key:"searchUsers",value:function(e){var t=this;S()({method:"get",url:"/User/SearchUser",params:{letter:e},headers:{Authorization:H.prepareToken()}}).then((function(e){t.store.dispatch("search/searchUsers",e.data),t.store.dispatch("search/stopSearching")}))}},{key:"getSearchStatus",value:function(){return this.store.state.search.getSearchStatus()}},{key:"getSearchedUserd",value:function(){return this.store.state.search.searchingUsersList}},{key:"getMixedUser",value:function(e){var t=this.getSearchedUserd(),r=te.getAllByLetter(e),n=[],s=[];t.forEach((function(e){if("Accepted"!=e.status)s.push(e);else{var t=e.id,a=r.find((function(e){if(e.id==t)return!0}));n.push(a)}}));var a=n.concat(s);return a}},{key:"isLoading",value:function(){return this.store.state.search.isLoading}}]),r}(q),ne=new re,se=r("bad4"),ae=function(e){Object(R["a"])(r,e);var t=Object(D["a"])(r);function r(){return Object(M["a"])(this,r),t.call(this)}return Object(L["a"])(r,[{key:"acceptOffer",value:function(e){var t=this;S()({method:"post",url:"/Relation/Accept",params:{Id:e},headers:{Authorization:H.prepareToken()}}).then((function(){t.store.dispatch("user/acceptOffer",e),t.store.dispatch("dialog/acceptOffer")}))}},{key:"reactToAccepting",value:function(e){this.store.dispatch("dialog/acceptOffer"),this.store.dispatch("user/reactToAccepting",e)}},{key:"sendOffer",value:function(e){var t=this;S()({method:"post",url:"/Relation/CreateOffer",params:{Id:e},headers:{Authorization:H.prepareToken()}}).then((function(){t.store.dispatch("dialog/sendOffer",e)}))}},{key:"declineOffer",value:function(e){var t=this;S()({method:"post",url:"/Relation/Decline",params:{Id:e},headers:{Authorization:H.prepareToken()}}).then((function(){t.store.dispatch("user/remove",e),t.store.dispatch("dialog/declineOffer")}))}},{key:"removeOffer",value:function(e){var t=this;S()({method:"post",url:"/Relation/RemoveOffer",params:{Id:e},headers:{Authorization:H.prepareToken()}}).then((function(){t.store.dispatch("dialog/removeOffer",e)}))}},{key:"recieveOffer",value:function(e){te.add(e)}}]),r}(q),ce=new ae,ie=r("779e"),oe=r.n(ie),ue=function(e){return Object(n["u"])("data-v-8cffd6cc"),e=e(),Object(n["s"])(),e},le={class:"modal"},de={class:"modal-core"},fe=ue((function(){return Object(n["g"])("img",{src:oe.a,alt:""},null,-1)})),ge=[fe],pe={class:"user-name"};function he(e,t,r,s,a,c){return Object(n["r"])(),Object(n["f"])("div",le,[Object(n["g"])("div",de,[Object(n["g"])("div",{class:"modal-exit",onClick:t[0]||(t[0]=function(t){return e.$emit("close")})},ge),Object(n["g"])("div",pe,Object(n["A"])(c.currenUserName),1),Object(n["g"])("div",{class:"button is-info",onClick:t[1]||(t[1]=function(){return c.logOutHandler&&c.logOutHandler.apply(c,arguments)})},"Log out")]),Object(n["g"])("div",{class:"modal-overllay",onClick:t[2]||(t[2]=function(t){return e.$emit("close")})})])}var me={name:"modal",data:function(){return{files:null}},computed:{currenUserName:function(){return this.$store.state.account.currentUser.name},photo:function(){return this.$store.state.account.currentUser.photo}},methods:{logOutHandler:function(){H.logOut()},saveClickHandler:function(){var e=this.files,t=new FormData;t.append("photo",e[0]),S()({method:"post",url:"/Account/ChangeAccountSettings",data:t,headers:{"Content-Type":"multipart/form-data",Authorization:H.prepareToken()}})},closeModal:function(){},photoChangedHandler:function(e){var t=this;this.files=e.target.files;var r=e.target.files;if(r.length>1)alert("больше одного нельзя");else{var n=new FileReader;n.addEventListener("load",(function(){t.$store.dispatch("account/changePhoto",n.result)})),n.readAsDataURL(r[0])}}}},be=(r("4f6a"),r("6b0d")),Oe=r.n(be);const Ae=Oe()(me,[["render",he],["__scopeId","data-v-8cffd6cc"]]);var je=Ae,ve={name:"Home",data:function(){return{searchInput:"",searchBlock:"Friends",modalOpen:!1}},components:{Modal:je},computed:{loading:function(){return ne.isLoading()},search:function(){return ne.getSearchStatus()},searchingUsersList:function(){return ne.getMixedUser(this.searchInput)},users:function(){return te.getAll()},currenUserName:function(){return this.$store.state.account.name}},methods:{getMessagePreview:function(e){var t=e.messages[e.messages.length-1];return t?t.text:""},closeModalHandler:function(){this.modalOpen=!1},openModalHandler:function(){this.modalOpen=!0},logOutHandler:function(){H.logOut()},settingsClickHanlder:function(){}},created:function(){var e=this,t=(new se["a"]).withUrl("/realTime",{accessTokenFactory:function(){return H.getToken()}}).build();t.on("ReceiveOffer",(function(e){var t=e;ce.recieveOffer(t)})),t.on("recieveMessage",(function(t){e.$store.dispatch("user/recieveMessage",t)})),t.on("AcceptOffer",(function(t){ce.reactToAccepting(t,e.$route.params.id)})),t.start()},watch:{searchInput:function(){var e=this.searchInput;if(this.searchBlock="Search",this.$store.dispatch("search/startSearching"),""==e)return this.searchBlock="Friends",this.$store.dispatch("search/searchUsers",[]),void this.$store.dispatch("search/stopSearching");ne.searchUsers(e)}}};r("7a36");const ye=Oe()(ve,[["render",B],["__scopeId","data-v-c1e6bd2e"]]);var ke=ye,we=r("abcd"),Ce=r.n(we),Ie=function(e){return Object(n["u"])("data-v-55a2c514"),e=e(),Object(n["s"])(),e},Ue={class:"wrapper fadeInDown"},Fe={id:"formContent"},xe=Ie((function(){return Object(n["g"])("div",{class:"fadeIn first"},[Object(n["g"])("img",{src:Ce.a,id:"icon",alt:"User Icon"})],-1)})),Be={class:"form-block-content"},Me={class:"form-line"},Le={key:0,class:"help is-danger"},Pe={class:"form-line"},Se={key:0,class:"help is-danger"},Te=Ie((function(){return Object(n["g"])("div",{class:"form-line"},[Object(n["g"])("input",{type:"submit",class:"",value:"Log In"})],-1)})),He={class:"form-line"},Re={key:0,class:"help is-danger"},De={class:"form-line"},Ee={key:0,class:"help is-danger"},Ne={class:"form-line"},Ge={key:0,class:"help is-danger"},Je=Ie((function(){return Object(n["g"])("div",{class:"form-line"},[Object(n["g"])("input",{type:"submit",class:"",value:"Log In"})],-1)})),Qe=Ie((function(){return Object(n["g"])("div",{id:"formFooter"},null,-1)}));function Ye(e,t,r,s,a,c){return Object(n["r"])(),Object(n["f"])("div",Ue,[Object(n["g"])("div",Fe,[Object(n["g"])("h2",{class:Object(n["n"])(["underlineHover tab",{active:"login"==a.formActive,inactive:"login"!=a.formActive}]),onClick:t[0]||(t[0]=function(e){return c.changeTabBlock("login")})}," Sign In ",2),Object(n["g"])("h2",{class:Object(n["n"])(["inactive underlineHover tab",{active:"signup"==a.formActive,inactive:"signup"!=a.formActive}]),onClick:t[1]||(t[1]=function(e){return c.changeTabBlock("signup")})}," Sign Up ",2),xe,Object(n["g"])("div",Be,["login"==a.formActive?(Object(n["r"])(),Object(n["f"])("form",{key:0,onSubmit:t[4]||(t[4]=function(){return c.loginSubmitHandler&&c.loginSubmitHandler.apply(c,arguments)})},[Object(n["g"])("div",Me,[Object(n["G"])(Object(n["g"])("input",{class:Object(n["n"])(["input",{"is-danger":a.loginForm.errors.name}]),type:"text",placeholder:"Name",name:"name","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.loginForm.inputs.name=e})},null,2),[[n["C"],a.loginForm.inputs.name]]),null!=a.loginForm.errors.name?(Object(n["r"])(),Object(n["f"])("p",Le,Object(n["A"])(a.loginForm.errors.name),1)):Object(n["e"])("",!0)]),Object(n["g"])("div",Pe,[Object(n["G"])(Object(n["g"])("input",{class:Object(n["n"])(["input",{"is-danger":a.loginForm.errors.password}]),type:"Password",placeholder:"Password",name:"password","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.loginForm.inputs.password=e})},null,2),[[n["C"],a.loginForm.inputs.password]]),null!=a.loginForm.errors.password?(Object(n["r"])(),Object(n["f"])("p",Se,Object(n["A"])(a.loginForm.errors.password),1)):Object(n["e"])("",!0)]),Te],32)):(Object(n["r"])(),Object(n["f"])("form",{key:1,onSubmit:t[8]||(t[8]=function(){return c.registerSubmitHandler&&c.registerSubmitHandler.apply(c,arguments)})},[Object(n["g"])("div",He,[Object(n["G"])(Object(n["g"])("input",{class:Object(n["n"])(["input",{"is-danger":a.registerForm.errors.name}]),type:"text",placeholder:"Name","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.registerForm.inputs.name=e})},null,2),[[n["C"],a.registerForm.inputs.name]]),null!=a.registerForm.errors.name?(Object(n["r"])(),Object(n["f"])("p",Re,Object(n["A"])(a.registerForm.errors.name),1)):Object(n["e"])("",!0)]),Object(n["g"])("div",De,[Object(n["G"])(Object(n["g"])("input",{class:Object(n["n"])(["input",{"is-danger":a.registerForm.errors.password}]),type:"Password",placeholder:"Password","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.registerForm.inputs.password=e})},null,2),[[n["C"],a.registerForm.inputs.password]]),null!=a.registerForm.errors.password?(Object(n["r"])(),Object(n["f"])("p",Ee,Object(n["A"])(a.registerForm.errors.password),1)):Object(n["e"])("",!0)]),Object(n["g"])("div",Ne,[Object(n["G"])(Object(n["g"])("input",{type:"Password",class:Object(n["n"])(["input",{"is-danger":a.registerForm.errors.confirmPassword}]),placeholder:"Confirm Password","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.registerForm.inputs.confirmPassword=e})},null,2),[[n["C"],a.registerForm.inputs.confirmPassword]]),null!=a.registerForm.errors.confirmPassword?(Object(n["r"])(),Object(n["f"])("p",Ge,Object(n["A"])(a.registerForm.errors.confirmPassword),1)):Object(n["e"])("",!0)]),Je],32))]),Qe])])}var Ve={name:"AuthPage",data:function(){return{formActive:"login",loginForm:{inputs:{name:"",password:""},errors:{name:null,password:null,count:0}},registerForm:{inputs:{name:"",password:"",confirmPassword:""},errors:{name:null,password:null,confirmPassword:null,count:0}}}},methods:{changeTabBlock:function(e){this.formActive=e,this.resetErrors()},loginSubmitHandler:function(e){var t=this;e.preventDefault();var r=this.loginForm.inputs.name,n=this.loginForm.inputs.password;""==r&&(this.loginForm.errors.name="Name shouldnt be empty",this.loginForm.errors.count+=1),""==n&&(this.loginForm.errors.password="Password field shouldnt be empty",this.loginForm.errors.count+=1),H.logIn(r,n).then((function(e){t.$store.dispatch("account/initiateAppData",e),Jt.push("/chat")}))},resetErrors:function(){this.registerForm.errors.name=null,this.registerForm.errors.password=null,this.registerForm.errors.confirmPassword=null,this.registerForm.errors.count=0},registerSubmitHandler:function(e){var t=this;return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,s,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.preventDefault(),n=t.registerForm.inputs.name,s=t.registerForm.inputs.password,a=t.registerForm.inputs.confirmPassword,t.resetErrors(),""==n&&(t.registerForm.errors.name="Name shouldnt be empty",t.registerForm.errors.count+=1),""==s&&(t.registerForm.errors.password="Password field shouldnt be empty",t.registerForm.errors.count+=1),""==a&&(t.registerForm.errors.confirmPassword="Password confirm field shouldnt be empty",t.registerForm.errors.count+=1),s!=a&&(t.registerForm.errors.password="Password and confirm password fields should be equal",t.registerForm.errors.confirmPassword="Password and confirm password fields should be equal",t.registerForm.errors.count+=1),!(t.registerForm.errors.count>0)){r.next=11;break}return r.abrupt("return");case 11:return r.next=13,H.signUp(n,s,a);case 13:return c=r.sent,r.next=16,t.$store.dispatch("account/initiateAppData",c);case 16:case"end":return r.stop()}}),r)})))()}}};r("e09d");const ze=Oe()(Ve,[["render",Ye],["__scopeId","data-v-55a2c514"]]);var _e=ze,Ze=function(e){return Object(n["u"])("data-v-41dd848a"),e=e(),Object(n["s"])(),e},Ke={class:"Dialog"},We={class:"card-header msg_head"},Xe={class:"d-flex bd-highlight"},$e={class:"user_info"},qe=Ze((function(){return Object(n["g"])("div",{class:"video_cam"},[Object(n["g"])("span",null,[Object(n["g"])("i",{class:"fas fa-video"})]),Object(n["g"])("span",null,[Object(n["g"])("i",{class:"fas fa-phone"})])],-1)})),et={class:"card-body msg_card_body"};function tt(e,t,r,s,a,c){var i=Object(n["y"])("Empty"),o=Object(n["y"])("Main");return Object(n["r"])(),Object(n["f"])("div",Ke,[Object(n["g"])("div",We,[Object(n["g"])("div",Xe,[Object(n["g"])("div",$e,[Object(n["g"])("span",null,"Chat with "+Object(n["A"])(a.user.name),1)]),qe])]),Object(n["g"])("div",et,["Offer"==a.userType?(Object(n["r"])(),Object(n["d"])(i,{key:0,belong:a.user.isThisUserInitiatorOfRelation,status:a.user.status,id:a.user.id},null,8,["belong","status","id"])):(Object(n["r"])(),Object(n["d"])(o,{key:1}))])])}var rt={class:"Empty"},nt={key:0},st={class:"buttons"},at={key:1},ct={key:0},it={class:"buttons"},ot={key:1},ut={class:"buttons"},lt={key:2};function dt(e,t,r,s,a,c){var i=Object(n["y"])("Main");return Object(n["r"])(),Object(n["f"])("div",rt,["Nothing"==r.status?(Object(n["r"])(),Object(n["f"])("div",nt,[Object(n["g"])("div",st,[Object(n["g"])("button",{class:"button is-primary",onClick:t[0]||(t[0]=function(){return c.offerButtonClickHandler&&c.offerButtonClickHandler.apply(c,arguments)})}," Отправить запрос ")])])):Object(n["e"])("",!0),"Sended"==r.status?(Object(n["r"])(),Object(n["f"])("div",at,[0==r.belong?(Object(n["r"])(),Object(n["f"])("div",ct,[Object(n["g"])("div",it,[Object(n["g"])("button",{class:"button is-danger",onClick:t[1]||(t[1]=function(){return c.removeOfferButtonClickHandler&&c.removeOfferButtonClickHandler.apply(c,arguments)})}," Удалить запрос ")])])):Object(n["e"])("",!0),1==r.belong?(Object(n["r"])(),Object(n["f"])("div",ot,[Object(n["g"])("div",ut,[Object(n["g"])("button",{class:"button is-primary",onClick:t[2]||(t[2]=function(){return c.acceptOfferButtonClickHandler&&c.acceptOfferButtonClickHandler.apply(c,arguments)})}," Принять запрос "),Object(n["g"])("button",{class:"button is-danger",onClick:t[3]||(t[3]=function(){return c.declineOfferButtonClickHandler&&c.declineOfferButtonClickHandler.apply(c,arguments)})}," Отказать ")])])):Object(n["e"])("",!0)])):Object(n["e"])("",!0),"Accepted"==r.status?(Object(n["r"])(),Object(n["f"])("div",lt,[Object(n["h"])(i)])):Object(n["e"])("",!0)])}var ft=r("85b2"),gt=r.n(ft),pt=function(e){return Object(n["u"])("data-v-a609cca8"),e=e(),Object(n["s"])(),e},ht={class:"messanger-display"},mt={key:0,class:"d-flex justify-content-end"},bt={class:"message_composition"},Ot={class:"msg_cotainer_send"},At={key:1,class:"d-flex justify-content-start"},jt={class:"message_composition"},vt={class:"msg_cotainer"},yt={class:"card-footer"},kt={class:"input-group"},wt={class:"input-group-append"},Ct=pt((function(){return Object(n["g"])("img",{src:gt.a,alt:""},null,-1)})),It=[Ct];function Ut(e,t,r,s,a,c){return Object(n["r"])(),Object(n["f"])("div",null,[Object(n["g"])("div",ht,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(c.messages,(function(e){return Object(n["r"])(),Object(n["f"])("div",{key:e.text,class:"mb-4"},[e.fromId==c.id?(Object(n["r"])(),Object(n["f"])("div",mt,[Object(n["g"])("div",bt,[Object(n["g"])("div",Ot,Object(n["A"])(e.text),1)])])):(Object(n["r"])(),Object(n["f"])("div",At,[Object(n["g"])("div",jt,[Object(n["g"])("div",vt,Object(n["A"])(e.text),1)])]))])})),128))]),Object(n["g"])("div",yt,[Object(n["g"])("div",kt,[Object(n["G"])(Object(n["g"])("textarea",{name:"",class:"form-control type_msg",placeholder:"Type your message...","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.textarea=e})},null,512),[[n["C"],a.textarea]]),Object(n["g"])("div",wt,[Object(n["g"])("span",{class:"input-group-text send_btn",onClick:t[1]||(t[1]=function(){return c.buttonClickHandler&&c.buttonClickHandler.apply(c,arguments)})},It)])])])])}var Ft=Object(L["a"])((function e(t,r,n){Object(M["a"])(this,e),this.fromId=t,this.toId=r,this.text=n})),xt=function(e){Object(R["a"])(r,e);var t=Object(D["a"])(r);function r(){return Object(M["a"])(this,r),t.call(this)}return Object(L["a"])(r,[{key:"send",value:function(e,t){var r=this,n=this.store.getters["account/get"];S()({method:"post",url:"/Message/CreateMessage",data:{text:t,toId:e},headers:{Authorization:H.prepareToken()}}).then((function(){var s=new Ft(n.id,e,t);r.store.dispatch("user/addMessageToUser",{message:s,id:e})}))}}]),r}(q),Bt=new xt,Mt={name:"Main",data:function(){return{textarea:""}},methods:{buttonClickHandler:function(){var e=this.textarea,t=this.$store.getters["dialog/get"].id;this.textarea="",Bt.send(t,e)}},computed:{messages:function(){return this.$store.getters["dialog/getMessages"]},id:function(){return this.$store.getters["account/get"].id}}};r("70a3");const Lt=Oe()(Mt,[["render",Ut],["__scopeId","data-v-a609cca8"]]);var Pt=Lt,St={name:"Empty",props:["belong","status","id"],data:function(){return{}},components:{Main:Pt},methods:{offerButtonClickHandler:function(){ce.sendOffer(this.id)},removeOfferButtonClickHandler:function(){ce.removeOffer(this.id)},acceptOfferButtonClickHandler:function(){ce.acceptOffer(this.id)},declineOfferButtonClickHandler:function(){ce.declineOffer(this.id)}}};r("77d3");const Tt=Oe()(St,[["render",dt],["__scopeId","data-v-4e964532"]]);var Ht=Tt,Rt={name:"dialog",data:function(){return{messageWindow:"message",userBelong:"",userStatus:"",userType:"Offer",userId:"",user:""}},computed:{},components:{Empty:Ht,Main:Pt},created:function(){var e=this.$route.params.id,t=te.get(e);this.user=t,te.changeDialogUser(e)},mounted:function(){var e=this.$route.params.id,t=te.get(e);this.user=t},updated:function(){var e=this.$route.params.id,t=te.get(e);console.log(t),this.user=t,te.changeDialogUser(e)}};r("7fb9");const Dt=Oe()(Rt,[["render",tt],["__scopeId","data-v-41dd848a"]]);var Et=Dt,Nt=[{path:"/chat/",name:"Home",component:ke,children:[{path:"profile/:id",component:Et}]},{path:"/auth",name:"AuthPage",component:_e}],Gt=Object(s["a"])({history:Object(s["b"])("/"),routes:Nt}),Jt=Gt;function Qt(e,t,r,s,a,c){var i=Object(n["y"])("router-view"),o=Object(n["y"])("Loader");return Object(n["r"])(),Object(n["f"])("div",null,[a.isInitialFetchLoading?(Object(n["r"])(),Object(n["d"])(i,{key:0})):(Object(n["r"])(),Object(n["d"])(o,{key:1}))])}var Yt={class:"container-fluid min-vh-100"},Vt=Object(n["g"])("div",{class:"row justify-content-center min-vh-100 align-items-center"},[Object(n["g"])("div",{class:"spinner-border",role:"status"},[Object(n["g"])("span",{class:"sr-only"},"Loading...")])],-1),zt=[Vt];function _t(e,t,r,s,a,c){return Object(n["r"])(),Object(n["f"])("div",Yt,zt)}var Zt={name:"Loader"};const Kt=Oe()(Zt,[["render",_t]]);var Wt=Kt,Xt={name:"App",components:{Loader:Wt},data:function(){return{isInitialFetchLoading:!1}},mounted:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.params.id,t.next=3,Z.send({url:"/Account/StartPoint",method:"post",data:{dialogId:r}});case 3:n=t.sent,setTimeout((function(){e.isInitialFetchLoading=!0}),2e3),n&&(e.$store.dispatch("account/initiateAppData",n.data),e.$store.dispatch("user/initiateAllInterlocutorsData",n.data.users),Jt.push("/chat"));case 6:case"end":return t.stop()}}),t)})))()}};r("06bc");const $t=Oe()(Xt,[["render",Qt]]);var qt=$t,er=Object(n["c"])(qt).use($).use(Jt).mount("#app");t["default"]=er},"5fff":function(e,t,r){},"6b10":function(e,t,r){},"6cf6":function(e,t,r){},"70a3":function(e,t,r){"use strict";r("bc8f")},"779e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABtSURBVDiN3dExCoQwEIXhD9mrqluqlV7CC3jM7dXC2EiIRhBh/2rIe/MmmfB3fFEm9DJ4koYZXUTrgpYaABos6E/OLodkN++0tivPoY5S5KbmTD8+YbjTvHM5pJL5jZ+DqUCNKRIw4ufBvb3ECjMyHZf083wYAAAAAElFTkSuQmCC"},"77d3":function(e,t,r){"use strict";r("95e6")},"7a36":function(e,t,r){"use strict";r("5fff")},"7fb9":function(e,t,r){"use strict";r("dff8")},"85b2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYEAYAAACw5+G7AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5gQHBxgeGcV/+QAAAdxJREFUWMPtVT1LK1EUnLN5JIUgCqKICjapFVQUbLQQwd5OJKAI/gE7Le3tRCSlhdYifhUpxEKxsbCyCQiWuihZ/Jh5xUWeH/vi3WdIXrHTHO6y7JmZM3cPkCJFihTVIIpid7fEHe6USpIkTU01mpe/AEnS2JhEkpLEF76QEkc5urbmBGazjeaZRMDneszj83MnJJ9P+n3zJkJRbG6GwWAzM4DmNDc0BGAEI52dELLIZjIxHXrQ09oKYBzjAwNVWtzjPgwBa7GWxUUzM7OtrRo5WChIvONdGFZxsta1wEKx6Po3Nf0j8ZWVOhKOr+QFL66uXAL6+jyjMjkp8ZnPr68NF/CnPvKxUnH8Jibe+AZfM6uSSqurADLIBMG3iuuHCipR5O7gw8NfnB8c/A+c/hyhXe6enrpI9/Z+k/mFhYYTTrgnfn08trUlGOk1rstlAJe4LJchhAij6Mtb/r/RG9zc3kLWZV2zsxbYiZ0cHgII4BNkp3R+vooz61zf23OT6u/3VemxyDa5ub/v+nd0JDAwTkA+/26Ebxmc5vTGhiOS/FLHCIgYPT2550tLrpr3QvUQwiKLBwcij3h0duaE5XI/M6a9XeQyl7e33Xl4uGaE4xvmcj8lniJFivrgNxYqWMascEZzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTA3VDA3OjI0OjMwKzAwOjAwlCZC5QAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0wN1QwNzoyNDozMCswMDowMOV7+lkAAAAASUVORK5CYII="},"95e6":function(e,t,r){},abcd:function(e,t,r){e.exports=r.p+"img/programmer.49c53331.png"},bc8f:function(e,t,r){},dff8:function(e,t,r){},e09d:function(e,t,r){"use strict";r("6b10")},fd86:function(e,t,r){}});
//# sourceMappingURL=app.56448bd6.js.map